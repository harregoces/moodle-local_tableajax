{"version":3,"sources":["../src/settings.js"],"names":["define","$","ajax","notification","templates","LoadingIcon","ACTIONS","PREVIOUS","NEXT","table_body","document","getElementById","limit","offset","TableActions","registerEvents","loadingData","parseInt","removeAttr","attr","promise","call","methodname","args","empty","addIconToContainerRemoveOnCompletion","done","data","render","then","html","js","replaceNodeContents","fail","exception","prototype","click","value","init"],"mappings":"AAOAA,OAAM,4BAAC,CAAC,QAAD,CACH,WADG,CAEH,mBAFG,CAGH,gBAHG,CAIH,kBAJG,CAAD,CAKH,SACCC,CADD,CAECC,CAFD,CAGCC,CAHD,CAICC,CAJD,CAKCC,CALD,CAMD,IAEMC,CAAAA,CAAO,CAAG,CACVC,QAAQ,CAAE,4BADA,CAEVC,IAAI,CAAE,wBAFI,CAFhB,CAMMC,CAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CANnB,CAOMC,CAAK,CAAGF,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAPd,CAQME,CAAM,CAAGH,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CARf,CAUMG,CAAY,CAAG,UAAW,CAC1B,KAAKC,cAAL,EACH,CAZH,CAcMC,CAAW,CAAG,SAASJ,CAAT,CAAgBC,CAAhB,CAAwB,CACtC,GAAuB,CAAnB,CAAAI,QAAQ,CAACJ,CAAD,CAAZ,CAA0B,CACtBZ,CAAC,CAACK,CAAO,CAACC,QAAT,CAAD,CAAoBW,UAApB,CAA+B,UAA/B,CACH,CAFD,IAEO,CACHjB,CAAC,CAACK,CAAO,CAACC,QAAT,CAAD,CAAoBY,IAApB,CAAyB,UAAzB,CAAqC,UAArC,CACH,CACD,GAAIC,CAAAA,CAAO,CAAGlB,CAAI,CAACmB,IAAL,CAAU,CAAC,CACrBC,UAAU,CAAE,0BADS,CAErBC,IAAI,CAAE,CACFX,KAAK,CAAEA,CADL,CAEFC,MAAM,CAAEA,CAFN,CAFe,CAAD,CAAV,EAMV,CANU,CAAd,CAOAZ,CAAC,CAACQ,CAAD,CAAD,CAAce,KAAd,GACAnB,CAAW,CAACoB,oCAAZ,CAAiDhB,CAAjD,CAA6DW,CAA7D,EACAA,CAAO,CAACM,IAAR,CAAa,SAASC,CAAT,CAAe,CACxBvB,CAAS,CAACwB,MAAV,CAAiB,4BAAjB,CAA+C,CAAC,KAAQD,CAAT,CAA/C,EACKE,IADL,CACU,SAASC,CAAT,CAAeC,CAAf,CAAmB,CACrB,MAAO3B,CAAAA,CAAS,CAAC4B,mBAAV,CAA8BvB,CAA9B,CAA0CqB,CAA1C,CAAgDC,CAAhD,CACV,CAHL,EAGOE,IAHP,CAGY9B,CAAY,CAAC+B,SAHzB,CAIH,CALD,EAMAd,CAAO,CAACa,IAAR,CAAa9B,CAAY,CAAC+B,SAA1B,CACH,CApCH,CAsCEpB,CAAY,CAACqB,SAAb,CAAuBpB,cAAvB,CAAwC,UAAW,CAE/Cd,CAAC,CAACK,CAAO,CAACC,QAAT,CAAD,CAAoB6B,KAApB,CAA0B,UAAW,CACjCvB,CAAM,CAACwB,KAAP,CAAepB,QAAQ,CAACJ,CAAM,CAACwB,KAAR,CAAR,CAAyB,EAAxC,CACArB,CAAW,CAACC,QAAQ,CAACL,CAAK,CAACyB,KAAP,CAAT,CAAuBpB,QAAQ,CAACJ,CAAM,CAACwB,KAAR,CAA/B,CACd,CAHD,EAKApC,CAAC,CAACK,CAAO,CAACE,IAAT,CAAD,CAAgB4B,KAAhB,CAAsB,UAAU,CAC5BvB,CAAM,CAACwB,KAAP,CAAepB,QAAQ,CAACJ,CAAM,CAACwB,KAAR,CAAR,CAAyB,EAAxC,CACArB,CAAW,CAACC,QAAQ,CAACL,CAAK,CAACyB,KAAP,CAAT,CAAuBpB,QAAQ,CAACJ,CAAM,CAACwB,KAAR,CAA/B,CACd,CAHD,CAIH,CAXD,CAaA,MAAO,CACHC,IAAI,CAAE,eAAW,CACb,MAAO,IAAIxB,CAAAA,CACd,CAHE,CAKV,CAnEK,CAAN","sourcesContent":["/**\n * Setting js for local_tableajax.\n *\n * @module     local_tableajax\n * @copyright  2021 Hernan Arregoces <harregoces@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery',\n    'core/ajax',\n    'core/notification',\n    'core/templates',\n    'core/loadingicon'\n], function(\n    $,\n    ajax,\n    notification,\n    templates,\n    LoadingIcon\n) {\n\n    var ACTIONS = {\n        PREVIOUS: '[data-action=\"previous\"]',\n        NEXT: '[data-action=\"next\"]'\n    };\n    var table_body = document.getElementById('table_tableajax_body');\n    var limit = document.getElementById('limit');\n    var offset = document.getElementById('offset');\n\n    var TableActions = function() {\n        this.registerEvents();\n    };\n\n    var loadingData = function(limit, offset) {\n        if (parseInt(offset) > 0) {\n            $(ACTIONS.PREVIOUS).removeAttr('disabled');\n        } else {\n            $(ACTIONS.PREVIOUS).attr('disabled', 'disabled');\n        }\n        var promise = ajax.call([{\n            methodname: 'local_tableajax_get_data',\n            args: {\n                limit: limit,\n                offset: offset\n            }\n        }])[0];\n        $(table_body).empty();\n        LoadingIcon.addIconToContainerRemoveOnCompletion(table_body, promise);\n        promise.done(function(data) {\n            templates.render('local_tableajax/table_body', {'data': data})\n                .then(function(html, js) {\n                    return templates.replaceNodeContents(table_body, html, js);\n                }).fail(notification.exception);\n        });\n        promise.fail(notification.exception);\n    };\n\n    TableActions.prototype.registerEvents = function() {\n\n        $(ACTIONS.PREVIOUS).click(function() {\n            offset.value = parseInt(offset.value) - 10;\n            loadingData(parseInt(limit.value),parseInt(offset.value));\n        });\n\n        $(ACTIONS.NEXT).click(function(){\n            offset.value = parseInt(offset.value) + 10;\n            loadingData(parseInt(limit.value),parseInt(offset.value));\n        });\n    };\n\n    return {\n        init: function() {\n            return new TableActions();\n        }\n    };\n});"],"file":"settings.min.js"}